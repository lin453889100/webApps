function showapply(){$(".apply-hint").removeClass("apply-hint-error"),$("#apply-email").unsetInputError(),$(".apply-bg").css("opacity","0"),$(".apply-main").css("opacity","0"),$(".apply-main").css("top","-100px"),window.setTimeout(function(){$(".apply").css("z-index","-10"),$(".apply-step-2").show(),$(".apply-registered").hide(),$(".apply-step-3").hide(),$(".apply-step-4").hide(),registable=!0,applyable=!0},400)}function errormsg(t){$(".apply-hint").hasClass("apply-hint-error")||$(".apply-hint").addClass("apply-hint-error"),$(".apply-hint").html(t)}function toastError(t){$(".ones-toast-error").css("top","100px").css("opacity","1").css("z-index","9999"),$(".ones-toast-msg").html(t),window.setTimeout(function(){$(".ones-toast-error").css("top","50px").css("opacity","0").css("z-index","-1")},3e3)}function checkall(t){var e=!0,a=$("#team_scale").children(".select-title").html()||$("#team_scale").val(),n=$("#industry").children(".select-title").html()||$("#industry").val(),l=$("#apply-email").val().trim();if(""!=$("#apply-phone").val()&&Rtool.checkmobilephonenum($("#apply-phone").val()))return $("#apply-phone").setInputError(Rlanguage[lang.lang].index.apply.step.hintmessage.phoneinvalidmsg),e=!1;if($("#apply-phone").unsetInputError(),""!=l&&Rtool.checkMail(l))return $("#apply-email").setInputError(Rlanguage[lang.lang].index.apply.step.hintmessage.emailinvalidmsg),e=!1;if($("#apply-email").unsetInputError(),Rtool.checklength($("#apply-nickname").val(),32))return $("#apply-nickname").setInputError(Rlanguage[lang.lang].index.apply.step.hintmessage.namelengtherror),e=!1;if($("#apply-nickname").unsetInputError(),Rtool.checklength($("#apply-team-name").val(),32))return $("#apply-team-name").setInputError(Rlanguage[lang.lang].index.apply.step.hintmessage.teamnamelengtherror),e=!1;if($("#apply-team-name").unsetInputError(),t){if(Rtool.checknull($("#apply-nickname").val()))return $("#apply-nickname").setInputError(Rlanguage[lang.lang].index.apply.step.hintmessage.nullnamemsg),e=!1;if(Rtool.checknull($("#apply-phone").val()))return $("#apply-phone").setInputError(Rlanguage[lang.lang].index.apply.step.hintmessage.nullphonemsg),e=!1;if(Rtool.checknull(l))return $("#apply-email").setInputError(Rlanguage[lang.lang].index.apply.step.hintmessage.nullemailmsg),e=!1;if(Rtool.checknull($("#apply-team-name").val()))return $("#apply-team-name").setInputError(Rlanguage[lang.lang].index.apply.step.hintmessage.nullteamnamemsg),e=!1;if(a.indexOf("团队规模")>-1)return $("#team_scale").setInputError(Rlanguage[lang.lang].index.apply.step.hintmessage.nullteamScale),e=!1;if($("#team_scale").unsetInputError(),n.indexOf("所属行业")>-1)return $("#industry").setInputError(Rlanguage[lang.lang].index.apply.step.hintmessage.nullindustry),e=!1;$("#industry").unsetInputError()}return e&&($(".apply-hint").removeClass("apply-hint-error"),$(".apply-hint").html(Rlanguage[lang.lang].index.apply.step.hint)),e}$.fn.setInputError=function(t){return $(".apply-error").removeClass("apply-error"),$(this).parent().hasClass("apply-mobile-input")?$(this).parent().setInputError(t):(errormsg(t),$(this).addClass("apply-error"))},$.fn.unsetInputError=function(t){return $(this).parent().hasClass("apply-mobile-input")?$(this).parent().unsetInputError(t):(t&&$(".apply-hint").removeClass("apply-hint-error").html(t),$(this).removeClass("apply-error"))},$(".nav-phone").click(function(t){$(".nav-phone-ul").stop().slideToggle("fast"),t.stopPropagation()}),$(".apply-bg").click(function(t){showapply()}),$(".apply-close").click(function(t){showapply()}),$(".apply-ok").click(function(t){showapply()});var nu=navigator.userAgent,ua=new uaDevice(nu);$(".price-try").click(function(t){"desktop"==ua.device.type?($(".apply-hint").html(Rlanguage[lang.lang].index.apply.step.hint),$(".apply").css("z-index","1001"),$(".apply-bg").css("opacity","0.7"),$(".apply-main").css("opacity","1"),$(".apply-main").css("top","0px")):location.href="contactForm.html"}),$(".registered-form").submit(function(){return isProduction?(mixpanel.track("apply button click"),_hmt.push(["_trackEvent","apply button click","Button click"])):console.log("apply button click"),location.href="sign_up.html",!1}),$(".top-content-try-button").click(function(){$(this).parent().submit()}),$(".top-registered,.price-product-try,.top-button").click(function(){isProduction?(mixpanel.track("login button click"),_hmt.push(["_trackEvent","login button click","Button click"])):console.log("login button click"),location.href="sign_up.html"}),$(".apply-select").click(function(t){var e=$(this);$(".apply-select").children(".select-option").each(function(t,a){e!=$(this)&&$(this).stop().slideUp("fast")}),$(this).children(".select-option").stop().slideToggle("fast"),checkall(),t.stopPropagation()}),$(document).click(function(t){$(".apply-select").children(".select-option").slideUp("fast"),$(".nav-phone-ul").stop().slideUp("fast")}),$(".select-option").on("click","li",function(t){$(this).parent().parent().children(".select-title").html($(this).html()).removeClass("select-title-placeholder")});var applyable=!0;$(".apply-button").click(function(t){var e=$("#team_scale").children(".select-title").html()||$("#team_scale").val(),a=$("#industry").children(".select-title").html()||$("#industry").val(),n=$("#apply-email").val().trim(),l=Rtool.getArgs();applyable&&checkall(!0)&&(applyable=!1,$.ajax({url:"https://api.ones.ai/project/v1/auth/request_support",dataType:"jsonp",jsonp:"jsonpcallback",type:"post",data:{email:n,name:$("#apply-nickname").val(),team_name:$("#apply-team-name").val(),phone:"+86"+$("#apply-phone").val(),team_scale:e,industry:a,source:l.source},contentType:"application/json; charset=utf-8",success:function(t){"200"==t.code?($(".apply-step-3").length>0?($(".apply-step-2").fadeOut("fast"),$(".apply-step-3").fadeIn("fast")):(applyable=!0,location.href="contactSuccess.html"),isProduction?(mixpanel.track("contact us"),_hmt.push(["_trackEvent","contact us","Effective number"])):console.log("contact us")):(applyable=!0,errormsg("621"==t.code?"您的邮箱或者手机号已经申请过了":"600"==t.code?"您的邮箱地址有误":"622"==t.code?"您的手机号无效,请重新输入":"服务器申请人数过多,请稍后再试。"))},error:function(t){errormsg("服务器异常")}}))}),$("#apply-phone").blur(function(t){checkall()}),$("#apply-email").blur(function(t){checkall()}),$("#apply-nickname").blur(function(t){checkall()}),$("#apply-team-name").blur(function(t){checkall()}),$(".top-button-down").click(function(){$("html,body").stop().animate({scrollTop:document.documentElement.clientHeight},500)}),window.devicePixelRatio&&window.devicePixelRatio>1&&$("img").each(function(){var t=$(this).attr("src")||$(this).attr("data-src"),e=t.substr(0,t.lastIndexOf(".")),a=t.substr(t.lastIndexOf(".")),n="";n=null!=$(this).attr("data-src2X")?$(this).attr("data-src2X"):e+"X2"+a,$(this).attr("src")?$(this).attr("src",n):$(this).attr("data-src",n)});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImluZGV4LmpzIl0sIm5hbWVzIjpbInNob3dhcHBseSIsIiQiLCJyZW1vdmVDbGFzcyIsInVuc2V0SW5wdXRFcnJvciIsImNzcyIsIndpbmRvdyIsInNldFRpbWVvdXQiLCJzaG93IiwiaGlkZSIsInJlZ2lzdGFibGUiLCJhcHBseWFibGUiLCJlcnJvcm1zZyIsInN0ciIsImhhc0NsYXNzIiwiYWRkQ2xhc3MiLCJodG1sIiwidG9hc3RFcnJvciIsIm1zZyIsImNoZWNrYWxsIiwiaXNzdWJtaXQiLCJpc2NsZWFyIiwidGVhbVNjYWxlVmFsdWUiLCJjaGlsZHJlbiIsInZhbCIsImluZHVzdHJ5VmFsdWUiLCJlbWFpbFZhbHVlIiwidHJpbSIsIlJ0b29sIiwiY2hlY2ttb2JpbGVwaG9uZW51bSIsInNldElucHV0RXJyb3IiLCJSbGFuZ3VhZ2UiLCJsYW5nIiwiaW5kZXgiLCJhcHBseSIsInN0ZXAiLCJoaW50bWVzc2FnZSIsInBob25laW52YWxpZG1zZyIsImNoZWNrTWFpbCIsImVtYWlsaW52YWxpZG1zZyIsImNoZWNrbGVuZ3RoIiwibmFtZWxlbmd0aGVycm9yIiwidGVhbW5hbWVsZW5ndGhlcnJvciIsImNoZWNrbnVsbCIsIm51bGxuYW1lbXNnIiwibnVsbHBob25lbXNnIiwibnVsbGVtYWlsbXNnIiwibnVsbHRlYW1uYW1lbXNnIiwiaW5kZXhPZiIsIm51bGx0ZWFtU2NhbGUiLCJudWxsaW5kdXN0cnkiLCJoaW50IiwiZm4iLCJ0aGlzIiwicGFyZW50IiwiY2xpY2siLCJlIiwic3RvcCIsInNsaWRlVG9nZ2xlIiwic3RvcFByb3BhZ2F0aW9uIiwibnUiLCJuYXZpZ2F0b3IiLCJ1c2VyQWdlbnQiLCJ1YSIsInVhRGV2aWNlIiwiZGV2aWNlIiwidHlwZSIsImxvY2F0aW9uIiwiaHJlZiIsInN1Ym1pdCIsImlzUHJvZHVjdGlvbiIsIm1peHBhbmVsIiwidHJhY2siLCJfaG10IiwicHVzaCIsImNvbnNvbGUiLCJsb2ciLCJ0aGlzanEiLCJlYWNoIiwiaSIsInNsaWRlVXAiLCJkb2N1bWVudCIsIm9uIiwiYXJnTWFwIiwiZ2V0QXJncyIsImFqYXgiLCJ1cmwiLCJkYXRhVHlwZSIsImpzb25wIiwiZGF0YSIsImVtYWlsIiwibmFtZSIsInRlYW1fbmFtZSIsInBob25lIiwidGVhbV9zY2FsZSIsImluZHVzdHJ5Iiwic291cmNlIiwiY29udGVudFR5cGUiLCJzdWNjZXNzIiwiY29kZSIsImxlbmd0aCIsImZhZGVPdXQiLCJmYWRlSW4iLCJlcnJvciIsImJsdXIiLCJhbmltYXRlIiwic2Nyb2xsVG9wIiwiZG9jdW1lbnRFbGVtZW50IiwiY2xpZW50SGVpZ2h0IiwiZGV2aWNlUGl4ZWxSYXRpbyIsImltYWdlUGF0aCIsImF0dHIiLCJpbWFnZVBhdGhFeGNlcHRUeXBlIiwic3Vic3RyIiwibGFzdEluZGV4T2YiLCJpbWFnZVR5cGUiLCJyZXRJbWFnZVBhdGgiXSwibWFwcGluZ3MiOiJBQWlCQSxTQUFTQSxZQUNQQyxFQUFFLGVBQWVDLFlBQVksb0JBQzdCRCxFQUFFLGdCQUFnQkUsa0JBQ2xCRixFQUFFLGFBQWFHLElBQUksVUFBVSxLQUM3QkgsRUFBRSxlQUFlRyxJQUFJLFVBQVUsS0FDL0JILEVBQUUsZUFBZUcsSUFBSSxNQUFNLFVBQzNCQyxPQUFPQyxXQUFXLFdBQ2hCTCxFQUFFLFVBQVVHLElBQUksVUFBVSxPQUMxQkgsRUFBRSxpQkFBaUJNLE9BQ25CTixFQUFFLHFCQUFxQk8sT0FDdkJQLEVBQUUsaUJBQWlCTyxPQUNuQlAsRUFBRSxpQkFBaUJPLE9BQ25CQyxZQUFhLEVBQ2JDLFdBQVksR0FDWixLQUlKLFNBQVNDLFNBQVNDLEdBQ2hCWCxFQUFFLGVBQWVZLFNBQVMscUJBQXVCWixFQUFFLGVBQWVhLFNBQVMsb0JBQzNFYixFQUFFLGVBQWVjLEtBQUtILEdBR3hCLFNBQVNJLFdBQVdDLEdBQ2xCaEIsRUFBRSxxQkFBcUJHLElBQUksTUFBTSxTQUFTQSxJQUFJLFVBQVUsS0FBS0EsSUFBSSxVQUFVLFFBQzNFSCxFQUFFLG1CQUFtQmMsS0FBS0UsR0FDMUJaLE9B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LEdBQ3hEM0csRUFBRSxPQUFPNEUsS0FBSyxXQUNaLElBQUlnQyxFQUFZNUcsRUFBRW1ELE1BQU0wRCxLQUFLLFFBQVU3RyxFQUFFbUQsTUFBTTBELEtBQUssWUFDaERDLEVBQXNCRixFQUFVRyxPQUFPLEVBQUVILEVBQVVJLFlBQVksTUFDL0RDLEVBQVlMLEVBQVVHLE9BQU9ILEVBQVVJLFlBQVksTUFDbkRFLEVBQWUsR0FFakJBLEVBRCtCLE1BQTlCbEgsRUFBRW1ELE1BQU0wRCxLQUFLLGNBQ0M3RyxFQUFFbUQsTUFBTTBELEtBQUssY0FFYkMsRUFBb0IsS0FBS0csRUFFdkNqSCxFQUFFbUQsTUFBTTBELEtBQUssT0FDZDdHLEVBQUVtRCxNQUFNMEQsS0FBSyxNQUFNSyxHQUVuQmxILEVBQUVtRCxNQUFNMEQsS0FBSyxXQUFXSyIsImZpbGUiOiJpbmRleC5qcyIsInNvdXJjZXNDb250ZW50IjpbIiQuZm4uc2V0SW5wdXRFcnJvciA9IGZ1bmN0aW9uKG1zZyl7XG4gICQoXCIuYXBwbHktZXJyb3JcIikucmVtb3ZlQ2xhc3MoXCJhcHBseS1lcnJvclwiKTtcbiAgaWYoJCh0aGlzKS5wYXJlbnQoKS5oYXNDbGFzcyhcImFwcGx5LW1vYmlsZS1pbnB1dFwiKSl7XG4gICAgcmV0dXJuICQodGhpcykucGFyZW50KCkuc2V0SW5wdXRFcnJvcihtc2cpXG4gIH0gZWxzZSB7XG4gICAgZXJyb3Jtc2cobXNnKTtcbiAgICByZXR1cm4gJCh0aGlzKS5hZGRDbGFzcyhcImFwcGx5LWVycm9yXCIpO1xuICB9XG59XG4kLmZuLnVuc2V0SW5wdXRFcnJvciA9IGZ1bmN0aW9uKG1zZyl7XG4gIGlmKCQodGhpcykucGFyZW50KCkuaGFzQ2xhc3MoXCJhcHBseS1tb2JpbGUtaW5wdXRcIikpe1xuICAgIHJldHVybiAkKHRoaXMpLnBhcmVudCgpLnVuc2V0SW5wdXRFcnJvcihtc2cpO1xuICB9IGVsc2Uge1xuICAgIG1zZyAmJiAkKFwiLmFwcGx5LWhpbnRcIikucmVtb3ZlQ2xhc3MoXCJhcHBseS1oaW50LWVycm9yXCIpLmh0bWwobXNnKTtcbiAgICByZXR1cm4gJCh0aGlzKS5yZW1vdmVDbGFzcyhcImFwcGx5LWVycm9yXCIpO1xuICB9XG59XG5mdW5jdGlvbiBzaG93YXBwbHkoKXtcbiAgJChcIi5hcHBseS1oaW50XCIpLnJlbW92ZUNsYXNzKFwiYXBwbHktaGludC1lcnJvclwiKTtcbiAgJChcIiNhcHBseS1lbWFpbFwiKS51bnNldElucHV0RXJyb3IoKTtcbiAgJChcIi5hcHBseS1iZ1wiKS5jc3MoXCJvcGFjaXR5XCIsXCIwXCIpO1xuICAkKFwiLmFwcGx5LW1haW5cIikuY3NzKFwib3BhY2l0eVwiLFwiMFwiKTtcbiAgJChcIi5hcHBseS1tYWluXCIpLmNzcyhcInRvcFwiLFwiLTEwMHB4XCIpO1xuICB3aW5kb3cuc2V0VGltZW91dChmdW5jdGlvbigpe1xuICAgICQoXCIuYXBwbHlcIikuY3NzKFwiei1pbmRleFwiLFwiLTEwXCIpO1xuICAgICQoXCIuYXBwbHktc3RlcC0yXCIpLnNob3coKTtcbiAgICAkKFwiLmFwcGx5LXJlZ2lzdGVyZWRcIikuaGlkZSgpO1xuICAgICQoXCIuYXBwbHktc3RlcC0zXCIpLmhpZGUoKTtcbiAgICAkKFwiLmFwcGx5LXN0ZXAtNFwiKS5oaWRlKCk7XG4gICAgcmVnaXN0YWJsZSA9IHRydWU7XG4gICAgYXBwbHlhYmxlID0gdHJ1ZTtcbiAgfSw0MDApO1xufVxuXG5cbmZ1bmN0aW9uIGVycm9ybXNnKHN0cil7XG4gICQoXCIuYXBwbHktaGludFwiKS5oYXNDbGFzcyhcImFwcGx5LWhpbnQtZXJyb3JcIik/XCJcIjokKFwiLmFwcGx5LWhpbnRcIikuYWRkQ2xhc3MoXCJhcHBseS1oaW50LWVycm9yXCIpO1xuICAkKFwiLmFwcGx5LWhpbnRcIikuaHRtbChzdHIpO1xufVxuXG5mdW5jdGlvbiB0b2FzdEVycm9yKG1zZyl7XG4gICQoXCIub25lcy10b2FzdC1lcnJvclwiKS5jc3MoXCJ0b3BcIixcIjEwMHB4XCIpLmNzcyhcIm9wYWNpdHlcIixcIjFcIikuY3NzKFwiei1pbmRleFwiLFwiOTk5OVwiKTtcbiAgJChcIi5vbmVzLXRvYXN0LW1zZ1wiKS5odG1sKG1zZyk7XG4gIHdpbmRvdy5zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7XG4gICAgJChcIi5vbmVzLXRvYXN0LWVycm9yXCIpLmNzcyhcInRvcFwiLFwiNTBweFwiKS5jc3MoXCJvcGFjaXR5XCIsXCIwXCIpLmNzcyhcInotaW5kZXhcIixcIi0xXCIpO1xuICB9LDMwMDApXG59XG4kKFwiLm5hdi1waG9uZVwiKS5jbGljayhmdW5jdGlvbihlKXtcbiAgJChcIi5uYXYtcGhvbmUtdWxcIikuc3RvcCgpLnNsaWRlVG9nZ2xlKFwiZmFzdFwiKTtcbiAgZS5zdG9wUHJvcGFnYXRpb24oKTtcbn0pO1xuXG4kKFwiLmFwcGx5LWJnXCIpLmNsaWNrKGZ1bmN0aW9uKGUpe1xuICBzaG93YXBwbHkoKTtcbn0pO1xuXG4kKFwiLmFwcGx5LWNsb3NlXCIpLmNsaWNrKGZ1bmN0aW9uKGUpe1xuICBzaG93YXBwbHkoKTtcbn0pO1xuXG4kKFwiLmFwcGx5LW9rXCIpLmNsaWNrKGZ1bmN0aW9uKGUpe1xuICBzaG93YXBwbHkoKTtcbn0pO1xuXG52YXIgbnUgPSBuYXZpZ2F0b3IudXNlckFnZW50O1xudmFyIHVhID0gbmV3IHVhRGV2aWNlKG51KTtcbiQoXCIucHJpY2UtdHJ5XCIpLmNsaWNrKGZ1bmN0aW9uKGUpe1xuXG4gIGlmICh1YS5kZXZpY2UudHlwZSA9PSAnZGVza3RvcCcpIHtcbiAgICAkKFwiLmFwcGx5LWhpbnRcIikuaHRtbChSbGFuZ3VhZ2VbbGFuZy5sYW5nXS5pbmRleC5hcHBseS5zdGVwLmhpbnQpO1xuICAgICQoXCIuYXBwbHlcIikuY3NzKFwiei1pbmRleFwiLCBcIjEwMDFcIik7XG4gICAgJChcIi5hcHBseS1iZ1wiKS5jc3MoXCJvcGFjaXR5XCIsIFwiMC43XCIpO1xuICAgICQoXCIuYXBwbHktbWFpblwiKS5jc3MoXCJvcGFjaXR5XCIsIFwiMVwiKTtcbiAgICAkKFwiLmFwcGx5LW1haW5cIikuY3NzKFwidG9wXCIsIFwiMHB4XCIpO1xuICB9IGVsc2Uge1xuICAgIGxvY2F0aW9uLmhyZWY9XCJjb250YWN0Rm9ybS5odG1sXCJcbiAgfVxufSk7XG4kKFwiLnJlZ2lzdGVyZWQtZm9ybVwiKS5zdWJtaXQoZnVuY3Rpb24oKXtcbiAgaWYoaXNQcm9kdWN0aW9uKSB7XG4gICAgbWl4cGFuZWwudHJhY2soXCJhcHBseSBidXR0b24gY2xpY2tcIik7XG4gICAgX2htdC5wdXNoKFsnX3RyYWNrRXZlbnQnLCdhcHBseSBidXR0b24gY2xpY2snLCdCdXR0b24gY2xpY2snXSlcbiAgfSBlbHNlIHtcbiAgICBjb25zb2xlLmxvZyhcImFwcGx5IGJ1dHRvbiBjbGlja1wiKTtcbiAgfVxuICBsb2NhdGlvbi5ocmVmID0gXCJzaWduX3VwLmh0bWxcIjtcbiAgcmV0dXJuIGZhbHNlO1xufSlcbiQoXCIudG9wLWNvbnRlbnQtdHJ5LWJ1dHRvblwiKS5jbGljayhmdW5jdGlvbigpe1xuICAkKHRoaXMpLnBhcmVudCgpLnN1Ym1pdCgpO1xufSk7XG4kKFwiLnRvcC1yZWdpc3RlcmVkLC5wcmljZS1wcm9kdWN0LXRyeSwudG9wLWJ1dHRvblwiKS5jbGljayhmdW5jdGlvbigpe1xuXG4gIC8vIGlmICh1YS5kZXZpY2UudHlwZSA9PSAnZGVza3RvcCcpIHtcbiAgLy8gICAkKFwiI3JlZ2lzdGVyZWQtZW1haWxcIikudmFsKFwiXCIpLnVuc2V0SW5wdXRFcnJvcign5rOo5YaM5ZCO5Y2z5Y+v5L2T6aqMIE9ORVMg55qE5YWo6YOo5Lqn5ZOB5Yqf6IO9Jyk7XG4gIC8vICAgJChcIi5hcHBseS1zdGVwLTJcIikuaGlkZSgpO1xuICAvLyAgICQoXCIuYXBwbHktcmVnaXN0ZXJlZFwiKS5zaG93KCk7XG4gIC8vICAgJChcIi5hcHBseVwiKS5jc3MoXCJ6LWluZGV4XCIsIFwiMTAwMVwiKTtcbiAgLy8gICAkKFwiLmFwcGx5LWJnXCIpLmNzcyhcIm9wYWNpdHlcIiwgXCIwLjdcIik7XG4gIC8vICAgJChcIi5hcHBseS1tYWluXCIpLmNzcyhcIm9wYWNpdHlcIiwgXCIxXCIpLmNzcyhcInRvcFwiLCBcIjBweFwiKTtcbiAgLy8gfSBlbHNlIHtcbiAgaWYoaXNQcm9kdWN0aW9uKSB7XG4gICAgbWl4cGFuZWwudHJhY2soXCJsb2dpbiBidXR0b24gY2xpY2tcIik7XG4gICAgX2htdC5wdXNoKFsnX3RyYWNrRXZlbnQnLCdsb2dpbiBidXR0b24gY2xpY2snLCdCdXR0b24gY2xpY2snXSlcbiAgfWVsc2Uge1xuICAgIGNvbnNvbGUubG9nKFwibG9naW4gYnV0dG9uIGNsaWNrXCIpO1xuICB9XG4gICAgbG9jYXRpb24uaHJlZj1cInNpZ25fdXAuaHRtbFwiXG4gIC8vIH1cblxufSlcblxuJChcIi5hcHBseS1zZWxlY3RcIikuY2xpY2soZnVuY3Rpb24oZSl7XG4gIHZhciB0aGlzanE9JCh0aGlzKTtcbiAgJChcIi5hcHBseS1zZWxlY3RcIikuY2hpbGRyZW4oXCIuc2VsZWN0LW9wdGlvblwiKS5lYWNoKGZ1bmN0aW9uKGksZSl7XG4gICAgaWYodGhpc2pxIT0kKHRoaXMpKXtcbiAgICAgICQodGhpcykuc3RvcCgpLnNsaWRlVXAoXCJmYXN0XCIpO1xuICAgIH1cbiAgfSk7XG4gICQodGhpcykuY2hpbGRyZW4oXCIuc2VsZWN0LW9wdGlvblwiKS5zdG9wKCkuc2xpZGVUb2dnbGUoXCJmYXN0XCIpO1xuICBjaGVja2FsbCgpO1xuICBlLnN0b3BQcm9wYWdhdGlvbigpO1xufSk7XG4kKGRvY3VtZW50KS5jbGljayhmdW5jdGlvbihlKXtcbiAgJChcIi5hcHBseS1zZWxlY3RcIikuY2hpbGRyZW4oXCIuc2VsZWN0LW9wdGlvblwiKS5zbGlkZVVwKFwiZmFzdFwiKTtcbiAgJChcIi5uYXYtcGhvbmUtdWxcIikuc3RvcCgpLnNsaWRlVXAoXCJmYXN0XCIpO1xufSlcbiQoXCIuc2VsZWN0LW9wdGlvblwiKS5vbihcImNsaWNrXCIsXCJsaVwiLGZ1bmN0aW9uKGUpe1xuICAkKHRoaXMpLnBhcmVudCgpLnBhcmVudCgpLmNoaWxkcmVuKFwiLnNlbGVjdC10aXRsZVwiKS5odG1sKCQodGhpcykuaHRtbCgpKS5yZW1vdmVDbGFzcyhcInNlbGVjdC10aXRsZS1wbGFjZWhvbGRlclwiKTs7XG59KTtcblxuXG5cbnZhciBhcHBseWFibGUgPSB0cnVlO1xuJChcIi5hcHBseS1idXR0b25cIikuY2xpY2soZnVuY3Rpb24oZSl7XG4gIHZhciB0ZWFtU2NhbGVWYWx1ZSA9ICQoXCIjdGVhbV9zY2FsZVwiKS5jaGlsZHJlbihcIi5zZWxlY3QtdGl0bGVcIikuaHRtbCgpIHx8ICQoXCIjdGVhbV9zY2FsZVwiKS52YWwoKTtcbiAgdmFyIGluZHVzdHJ5VmFsdWUgPSAkKFwiI2luZHVzdHJ5XCIpLmNoaWxkcmVuKFwiLnNlbGVjdC10aXRsZVwiKS5odG1sKCkgfHwgJChcIiNpbmR1c3RyeVwiKS52YWwoKTtcbiAgdmFyIGVtYWlsVmFsdWUgPSAkKFwiI2FwcGx5LWVtYWlsXCIpLnZhbCgpLnRyaW0oKTtcbiAgdmFyIGFyZ01hcCA9IFJ0b29sLmdldEFyZ3MoKTtcbiAgaWYoYXBwbHlhYmxlICYmIGNoZWNrYWxsKHRydWUpKXtcbiAgICBhcHBseWFibGUgPSBmYWxzZTtcbiAgICAkLmFqYXgoe1xuICAgICAgdXJsOlwiaHR0cHM6Ly9hcGkub25lcy5haS9wcm9qZWN0L3YxL2F1dGgvcmVxdWVzdF9zdXBwb3J0XCIsXG4gICAgICBkYXRhVHlwZTpcImpzb25wXCIsXG4gICAgICBqc29ucDpcImpzb25wY2FsbGJhY1wiICtcbiAgICAgIFwia1wiLFxuICAgICAgdHlwZTpcInBvc3RcIixcbiAgICAgIGRhdGE6e2VtYWlsOmVtYWlsVmFsdWUsbmFtZTokKFwiI2FwcGx5LW5pY2tuYW1lXCIpLnZhbCgpLHRlYW1fbmFtZTokKFwiI2FwcGx5LXRlYW0tbmFtZVwiKS52YWwoKVxuICAgICAgICAscGhvbmU6XCIrODZcIiskKFwiI2FwcGx5LXBob25lXCIpLnZhbCgpXG4gICAgICAgICx0ZWFtX3NjYWxlOnRlYW1TY2FsZVZhbHVlXG4gICAgICAgICxpbmR1c3RyeTppbmR1c3RyeVZhbHVlXG4gICAgICAgICxzb3VyY2U6IGFyZ01hcC5zb3VyY2VcbiAgICAgIH0sXG4gICAgICBjb250ZW50VHlwZTogXCJhcHBsaWNhdGlvbi9qc29uOyBjaGFyc2V0PXV0Zi04XCIsXG4gICAgICBzdWNjZXNzOmZ1bmN0aW9uKGRhdGEpe1xuICAgICAgICBpZihkYXRhLmNvZGU9PVwiMjAwXCIpe1xuICAgICAgICAgIGlmKCQoXCIuYXBwbHktc3RlcC0zXCIpLmxlbmd0aCA+MCkge1xuICAgICAgICAgICAgJChcIi5hcHBseS1zdGVwLTJcIikuZmFkZU91dChcImZhc3RcIik7XG4gICAgICAgICAgICAkKFwiLmFwcGx5LXN0ZXAtM1wiKS5mYWRlSW4oXCJmYXN0XCIpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBhcHBseWFibGUgPSB0cnVlO1xuICAgICAgICAgICAgbG9jYXRpb24uaHJlZj1cImNvbnRhY3RTdWNjZXNzLmh0bWxcIjtcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYoaXNQcm9kdWN0aW9uKSB7XG4gICAgICAgICAgICBtaXhwYW5lbC50cmFjayhcImNvbnRhY3QgdXNcIik7XG4gICAgICAgICAgICBfaG10LnB1c2goWydfdHJhY2tFdmVudCcsICdjb250YWN0IHVzJywgJ0VmZmVjdGl2ZSBudW1iZXInXSlcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY29uc29sZS5sb2coXCJjb250YWN0IHVzXCIpO1xuICAgICAgICAgIH1cbiAgICAgICAgfWVsc2V7XG4gICAgICAgICAgYXBwbHlhYmxlID0gdHJ1ZTtcbiAgICAgICAgICBpZihkYXRhLmNvZGU9PVwiNjIxXCIpe1xuICAgICAgICAgICAgZXJyb3Jtc2coXCLmgqjnmoTpgq7nrrHmiJbogIXmiYvmnLrlj7flt7Lnu4/nlLPor7fov4fkuoZcIilcbiAgICAgICAgICB9ZWxzZSBpZihkYXRhLmNvZGU9PVwiNjAwXCIpe1xuICAgICAgICAgICAgZXJyb3Jtc2coXCLmgqjnmoTpgq7nrrHlnLDlnYDmnInor69cIilcbiAgICAgICAgICB9ZWxzZSBpZihkYXRhLmNvZGU9PVwiNjIyXCIpe1xuICAgICAgICAgICAgZXJyb3Jtc2coXCLmgqjnmoTmiYvmnLrlj7fml6DmlYgs6K+36YeN5paw6L6T5YWlXCIpXG4gICAgICAgICAgfVxuICAgICAgICAgIGVsc2V7XG4gICAgICAgICAgICBlcnJvcm1zZyhcIuacjeWKoeWZqOeUs+ivt+S6uuaVsOi/h+Wkmizor7fnqI3lkI7lho3or5XjgIJcIilcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgfSxcbiAgICAgIGVycm9yOmZ1bmN0aW9uKGRhdGEpe1xuICAgICAgICBlcnJvcm1zZyhcIuacjeWKoeWZqOW8guW4uFwiKTtcbiAgICAgIH1cbiAgICB9KVxuICB9XG5cbn0pO1xuXG5mdW5jdGlvbiBjaGVja2FsbChpc3N1Ym1pdCl7XG4gIHZhciBpc2NsZWFyPXRydWU7XG4gIHZhciB0ZWFtU2NhbGVWYWx1ZSA9ICQoXCIjdGVhbV9zY2FsZVwiKS5jaGlsZHJlbihcIi5zZWxlY3QtdGl0bGVcIikuaHRtbCgpIHx8ICQoXCIjdGVhbV9zY2FsZVwiKS52YWwoKTtcbiAgdmFyIGluZHVzdHJ5VmFsdWUgPSAkKFwiI2luZHVzdHJ5XCIpLmNoaWxkcmVuKFwiLnNlbGVjdC10aXRsZVwiKS5odG1sKCkgfHwgJChcIiNpbmR1c3RyeVwiKS52YWwoKTtcbiAgdmFyIGVtYWlsVmFsdWUgPSAkKFwiI2FwcGx5LWVtYWlsXCIpLnZhbCgpLnRyaW0oKTtcblxuICBpZigkKFwiI2FwcGx5LXBob25lXCIpLnZhbCgpIT1cIlwiICYmIFJ0b29sLmNoZWNrbW9iaWxlcGhvbmVudW0oJChcIiNhcHBseS1waG9uZVwiKS52YWwoKSkpe1xuICAgICQoXCIjYXBwbHktcGhvbmVcIikuc2V0SW5wdXRFcnJvcihSbGFuZ3VhZ2VbbGFuZy5sYW5nXS5pbmRleC5hcHBseS5zdGVwLmhpbnRtZXNzYWdlLnBob25laW52YWxpZG1zZylcbiAgICBpc2NsZWFyPWZhbHNlO1xuICAgIHJldHVybiBpc2NsZWFyO1xuICB9ZWxzZXtcbiAgICAkKFwiI2FwcGx5LXBob25lXCIpLnVuc2V0SW5wdXRFcnJvcigpOztcbiAgfVxuICBpZihlbWFpbFZhbHVlIT1cIlwiICYmIFJ0b29sLmNoZWNrTWFpbChlbWFpbFZhbHVlKSl7XG4gICAgJChcIiNhcHBseS1lbWFpbFwiKS5zZXRJbnB1dEVycm9yKFJsYW5ndWFnZVtsYW5nLmxhbmddLmluZGV4LmFwcGx5LnN0ZXAuaGludG1lc3NhZ2UuZW1haWxpbnZhbGlkbXNnKVxuICAgIGlzY2xlYXI9ZmFsc2U7XG4gICAgcmV0dXJuIGlzY2xlYXI7XG4gIH1lbHNle1xuICAgICQoXCIjYXBwbHktZW1haWxcIikudW5zZXRJbnB1dEVycm9yKCk7O1xuICB9XG4gIGlmKFJ0b29sLmNoZWNrbGVuZ3RoKCQoXCIjYXBwbHktbmlja25hbWVcIikudmFsKCksMzIpKXtcbiAgICAkKFwiI2FwcGx5LW5pY2tuYW1lXCIpLnNldElucHV0RXJyb3IoUmxhbmd1YWdlW2xhbmcubGFuZ10uaW5kZXguYXBwbHkuc3RlcC5oaW50bWVzc2FnZS5uYW1lbGVuZ3RoZXJyb3IpXG4gICAgaXNjbGVhcj1mYWxzZTtcbiAgICByZXR1cm4gaXNjbGVhcjtcbiAgfWVsc2V7XG4gICAgJChcIiNhcHBseS1uaWNrbmFtZVwiKS51bnNldElucHV0RXJyb3IoKTs7XG4gIH1cbiAgaWYoUnRvb2wuY2hlY2tsZW5ndGgoJChcIiNhcHBseS10ZWFtLW5hbWVcIikudmFsKCksMzIpKXtcbiAgICAkKFwiI2FwcGx5LXRlYW0tbmFtZVwiKS5zZXRJbnB1dEVycm9yKFJsYW5ndWFnZVtsYW5nLmxhbmddLmluZGV4LmFwcGx5LnN0ZXAuaGludG1lc3NhZ2UudGVhbW5hbWVsZW5ndGhlcnJvcilcbiAgICBpc2NsZWFyPWZhbHNlO1xuICAgIHJldHVybiBpc2NsZWFyO1xuICB9ZWxzZXtcbiAgICAkKFwiI2FwcGx5LXRlYW0tbmFtZVwiKS51bnNldElucHV0RXJyb3IoKTs7XG4gIH1cblxuICBpZihpc3N1Ym1pdCl7XG4gICAgaWYoUnRvb2wuY2hlY2tudWxsKCQoXCIjYXBwbHktbmlja25hbWVcIikudmFsKCkpKXtcbiAgICAgICQoXCIjYXBwbHktbmlja25hbWVcIikuc2V0SW5wdXRFcnJvcihSbGFuZ3VhZ2VbbGFuZy5sYW5nXS5pbmRleC5hcHBseS5zdGVwLmhpbnRtZXNzYWdlLm51bGxuYW1lbXNnKTtcbiAgICAgIGlzY2xlYXI9ZmFsc2U7XG4gICAgICByZXR1cm4gaXNjbGVhcjtcbiAgICB9XG4gICAgaWYoUnRvb2wuY2hlY2tudWxsKCQoXCIjYXBwbHktcGhvbmVcIikudmFsKCkpKXtcbiAgICAgICQoXCIjYXBwbHktcGhvbmVcIikuc2V0SW5wdXRFcnJvcihSbGFuZ3VhZ2VbbGFuZy5sYW5nXS5pbmRleC5hcHBseS5zdGVwLmhpbnRtZXNzYWdlLm51bGxwaG9uZW1zZylcbiAgICAgIGlzY2xlYXI9ZmFsc2U7XG4gICAgICByZXR1cm4gaXNjbGVhcjtcbiAgICB9XG4gICAgaWYoUnRvb2wuY2hlY2tudWxsKGVtYWlsVmFsdWUpKXtcbiAgICAgICQoXCIjYXBwbHktZW1haWxcIikuc2V0SW5wdXRFcnJvcihSbGFuZ3VhZ2VbbGFuZy5sYW5nXS5pbmRleC5hcHBseS5zdGVwLmhpbnRtZXNzYWdlLm51bGxlbWFpbG1zZylcbiAgICAgIGlzY2xlYXI9ZmFsc2U7XG4gICAgICByZXR1cm4gaXNjbGVhcjtcbiAgICB9XG4gICAgaWYoUnRvb2wuY2hlY2tudWxsKCQoXCIjYXBwbHktdGVhbS1uYW1lXCIpLnZhbCgpKSl7XG4gICAgICAkKFwiI2FwcGx5LXRlYW0tbmFtZVwiKS5zZXRJbnB1dEVycm9yKFJsYW5ndWFnZVtsYW5nLmxhbmddLmluZGV4LmFwcGx5LnN0ZXAuaGludG1lc3NhZ2UubnVsbHRlYW1uYW1lbXNnKVxuICAgICAgaXNjbGVhcj1mYWxzZTtcbiAgICAgIHJldHVybiBpc2NsZWFyO1xuICAgIH1cbiAgICBpZih0ZWFtU2NhbGVWYWx1ZS5pbmRleE9mKFwi5Zui6Zif6KeE5qihXCIpPi0xKXtcbiAgICAgICQoXCIjdGVhbV9zY2FsZVwiKS5zZXRJbnB1dEVycm9yKFJsYW5ndWFnZVtsYW5nLmxhbmddLmluZGV4LmFwcGx5LnN0ZXAuaGludG1lc3NhZ2UubnVsbHRlYW1TY2FsZSlcbiAgICAgIGlzY2xlYXI9ZmFsc2U7XG4gICAgICByZXR1cm4gaXNjbGVhcjtcbiAgICB9ZWxzZXtcbiAgICAgICQoXCIjdGVhbV9zY2FsZVwiKS51bnNldElucHV0RXJyb3IoKTtcbiAgICB9XG4gICAgaWYoaW5kdXN0cnlWYWx1ZS5pbmRleE9mKFwi5omA5bGe6KGM5LiaXCIpPi0xKXtcbiAgICAgICQoXCIjaW5kdXN0cnlcIikuc2V0SW5wdXRFcnJvcihSbGFuZ3VhZ2VbbGFuZy5sYW5nXS5pbmRleC5hcHBseS5zdGVwLmhpbnRtZXNzYWdlLm51bGxpbmR1c3RyeSlcbiAgICAgIGlzY2xlYXI9ZmFsc2U7XG4gICAgICByZXR1cm4gaXNjbGVhcjtcbiAgICB9ZWxzZXtcbiAgICAgICQoXCIjaW5kdXN0cnlcIikudW5zZXRJbnB1dEVycm9yKCk7XG4gICAgfVxuICB9XG5cbiAgaWYoaXNjbGVhcil7XG4gICAgJChcIi5hcHBseS1oaW50XCIpLnJlbW92ZUNsYXNzKFwiYXBwbHktaGludC1lcnJvclwiKTtcbiAgICAkKFwiLmFwcGx5LWhpbnRcIikuaHRtbChSbGFuZ3VhZ2VbbGFuZy5sYW5nXS5pbmRleC5hcHBseS5zdGVwLmhpbnQpO1xuICB9XG4gIHJldHVybiBpc2NsZWFyO1xufVxuXG4kKFwiI2FwcGx5LXBob25lXCIpLmJsdXIoZnVuY3Rpb24oZSl7XG4gIGNoZWNrYWxsKCk7XG59KVxuJChcIiNhcHBseS1lbWFpbFwiKS5ibHVyKGZ1bmN0aW9uKGUpe1xuICBjaGVja2FsbCgpO1xufSk7XG4kKFwiI2FwcGx5LW5pY2tuYW1lXCIpLmJsdXIoZnVuY3Rpb24oZSl7XG4gIGNoZWNrYWxsKCk7XG59KTtcbiQoXCIjYXBwbHktdGVhbS1uYW1lXCIpLmJsdXIoZnVuY3Rpb24oZSl7XG4gIGNoZWNrYWxsKCk7XG59KTtcblxuJChcIi50b3AtYnV0dG9uLWRvd25cIikuY2xpY2soZnVuY3Rpb24oKXtcbiAgJChcImh0bWwsYm9keVwiKS5zdG9wKCkuYW5pbWF0ZSh7c2Nyb2xsVG9wOmRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5jbGllbnRIZWlnaHR9LDUwMCk7XG59KTtcblxuaWYgKCB3aW5kb3cuZGV2aWNlUGl4ZWxSYXRpbyAmJiB3aW5kb3cuZGV2aWNlUGl4ZWxSYXRpbyA+IDEgKSB7XG4gICQoJ2ltZycpLmVhY2goZnVuY3Rpb24oKXtcbiAgICB2YXIgaW1hZ2VQYXRoID0gJCh0aGlzKS5hdHRyKFwic3JjXCIpIHx8ICQodGhpcykuYXR0cihcImRhdGEtc3JjXCIpO1xuICAgIHZhciBpbWFnZVBhdGhFeGNlcHRUeXBlID0gaW1hZ2VQYXRoLnN1YnN0cigwLGltYWdlUGF0aC5sYXN0SW5kZXhPZihcIi5cIikpXG4gICAgdmFyIGltYWdlVHlwZSA9IGltYWdlUGF0aC5zdWJzdHIoaW1hZ2VQYXRoLmxhc3RJbmRleE9mKFwiLlwiKSk7XG4gICAgdmFyIHJldEltYWdlUGF0aCA9IFwiXCI7XG4gICAgaWYoJCh0aGlzKS5hdHRyKFwiZGF0YS1zcmMyWFwiKSAhPSBudWxsKXtcbiAgICAgIHJldEltYWdlUGF0aCA9ICQodGhpcykuYXR0cihcImRhdGEtc3JjMlhcIilcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0SW1hZ2VQYXRoID0gaW1hZ2VQYXRoRXhjZXB0VHlwZSsnWDInK2ltYWdlVHlwZTtcbiAgICB9XG4gICAgaWYoJCh0aGlzKS5hdHRyKFwic3JjXCIpKXtcbiAgICAgICQodGhpcykuYXR0cihcInNyY1wiLHJldEltYWdlUGF0aCk7XG4gICAgfWVsc2V7XG4gICAgICAkKHRoaXMpLmF0dHIoXCJkYXRhLXNyY1wiLHJldEltYWdlUGF0aCk7XG4gICAgfVxuICB9KTtcbn1cbiJdfQ==
